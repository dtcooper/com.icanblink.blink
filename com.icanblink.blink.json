{
  "id": "com.icanblink.blink",
  "command": "/app/start.sh",
  "separate-locales": false,
  "base": "io.qt.qtwebkit.BaseApp",
  "base-version": "5.15-22.08",
  "runtime": "org.kde.Platform",
  "runtime-version": "5.15-22.08",
  "sdk": "org.kde.Sdk",
  "finish-args": [
    "--device=all",
    "--filesystem=home",
    "--share=ipc",
    "--share=network",
    "--socket=pulseaudio",
    "--socket=x11",
    "--talk-name=org.freedesktop.Notifications",
    "--talk-name=org.gtk.Notifications",
    "--talk-name=org.kde.StatusNotifierWatcher"
  ],
  "modules": [
    {
      "name": "cpython",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/python/cpython/archive/refs/tags/v3.9.16.tar.gz",
          "sha256": "9fe94a3fce1bf2fdc0be3164003ca8b4c4252685caa7882c26c24e4845e755fa"
        }
      ],
      "config-opts": [
        "--with-ensurepip=install"
      ],
      "ensure-writable": [
        "/lib/python*/site-packages/easy-install.pth",
        "/app/lib/python*/site-packages/easy-install.pth"
      ]
    },
    {
      "name": "mpfr",
      "sources": [
        {
          "type": "archive",
          "url": "https://ftp.gnu.org/gnu/mpfr/mpfr-4.2.0.tar.bz2",
          "sha256": "691db39178e36fc460c046591e4b0f2a52c8f2b3ee6d750cc2eab25f1eaa999d"
        }
      ]
    },
    {
      "name": "mpc",
      "sources": [
        {
          "type": "archive",
          "url": "https://ftp.gnu.org/gnu/mpc/mpc-1.3.1.tar.gz",
          "sha256": "ab642492f5cf882b74aa0cb730cd410a81edcdbec895183ce930e706c1c759b8"
        }
      ]
    },
    {
      "name": "pip-zzz",
      "buildsystem": "simple",
      "ensure-writable": [
        "/lib/python*/site-packages/easy-install.pth",
        "/app/lib/python*/site-packages/easy-install.pth"
      ],
      "build-commands": [
        "/app/bin/pip3.9 install --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"wheel\" \"pip\" \"cryptography\" \"pgpy\" \"PyQt-builder\" \"zope.interface\" \"gmpy2\" \"Cython\" \"dnspython\" \"greenlet\" \"gevent\" \"lxml\" \"sqlobject\" \"twisted\" \"python-dateutil\" \"pyOpenSSL\" \"oauth2client\" \"service-identity\" \"google-api-python-client\""
      ],
      "sources": [
        {
          "type": "file",
          "path": "sources/pip-zzz/attrs-22.2.0-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/Automat-22.10.0-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/cachetools-5.3.0-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/certifi-2022.12.7-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/cffi-1.15.1-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/charset_normalizer-3.1.0-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/constantly-15.1.0-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/cryptography-37.0.4-cp36-abi3-manylinux_2_24_x86_64.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/Cython-0.29.33-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_24_x86_64.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/dnspython-2.3.0-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/docutils-0.19-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/FormEncode-2.0.1-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/gevent-22.10.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/gmpy2-2.1.5-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/google_api_core-2.11.0-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/google_api_python_client-2.82.0-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/googleapis_common_protos-1.59.0-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/google_auth-2.16.2-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/google_auth_httplib2-0.1.0-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/greenlet-2.0.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/httplib2-0.21.0-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/hyperlink-21.0.0-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/idna-3.4-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/incremental-22.10.0-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/lxml-4.9.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_24_x86_64.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/m2r-0.3.1.tar.gz"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/mistune-0.8.4-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/oauth2client-4.1.3-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/packaging-23.0-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/PGPy-0.6.0.tar.gz"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/pip-23.0.1-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/ply-3.11-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/protobuf-4.22.1-cp37-abi3-manylinux2014_x86_64.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/pyasn1-0.4.8-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/pyasn1_modules-0.2.8-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/pycparser-2.21-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/PyDispatcher-2.0.7-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/pyOpenSSL-22.0.0-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/pyparsing-3.0.9-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/PyQt_builder-1.14.1-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/python_dateutil-2.8.2-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/requests-2.28.2-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/rsa-4.9-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/service_identity-21.1.0-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/setuptools-67.6.0-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/sip-6.7.7-cp37-abi3-manylinux_2_5_x86_64.manylinux1_x86_64.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/six-1.16.0-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/SQLObject-3.10.1-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/toml-0.10.2-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/Twisted-22.10.0-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/typing_extensions-4.5.0-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/uritemplate-4.1.1-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/urllib3-1.26.15-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/wheel-0.40.0-py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/zope.event-4.6-py2.py3-none-any.whl"
        },
        {
          "type": "file",
          "path": "sources/pip-zzz/zope.interface-6.0-cp39-cp39-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl"
        }
      ]
    },
    {
      "name": "python3-PyQt5_sip",
      "buildsystem": "simple",
      "ensure-writable": [
        "/lib/python*/site-packages/easy-install.pth",
        "/app/lib/python*/site-packages/easy-install.pth"
      ],
      "build-commands": [
        "/app/bin/python3.9 setup.py build",
        "/app/bin/python3.9 setup.py install --prefix=${FLATPAK_DEST}"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://files.pythonhosted.org/packages/d2/f4/4c3e5fc1584f5a2964cfc89bf420cfcc59aba0b1f2d08446e2b491a21ed5/PyQt5_sip-12.11.1.tar.gz",
          "sha256": "97d3fbda0f61edb1be6529ec2d5c7202ae83aee4353e4b264a159f8c9ada4369"
        }
      ]
    },
    {
      "name": "python3-PyQt5",
      "buildsystem": "simple",
      "ensure-writable": [
        "/lib/python*/site-packages/easy-install.pth",
        "/app/lib/python*/site-packages/easy-install.pth"
      ],
      "build-options": {
        "env": {
          "QMAKEPATH": "/app/lib"
        }
      },
      "build-commands": [
        "sip-install --qt-shared --confirm-license --debug --verbose --build-dir=${FLATPAK_BUILDER_BUILDDIR}/tmp --target-dir=${FLATPAK_DEST}/lib/python3.9/site-packages --no-dbus-python --no-designer-plugin --no-docstrings --no-qml-plugin --no-tools"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://files.pythonhosted.org/packages/5c/46/b4b6eae1e24d9432905ef1d4e7c28b6610e28252527cdc38f2a75997d8b5/PyQt5-5.15.9.tar.gz",
          "sha256": "dc41e8401a90dc3e2b692b411bd5492ab559ae27a27424eed4bd3915564ec4c0"
        }
      ]
    },
    {
      "name": "python3-application",
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/syco/python3-application.git",
          "tag": "release-3.0.6"
        }
      ],
      "buildsystem": "simple",
      "ensure-writable": [
        "/lib/python*/site-packages/easy-install.pth",
        "/app/lib/python*/site-packages/easy-install.pth"
      ],
      "build-commands": [
        "/app/bin/python3.9 setup.py build",
        "/app/bin/python3.9 setup.py install --prefix=${FLATPAK_DEST}"
      ]
    },
    {
      "name": "python3-eventlib",
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/syco/python3-eventlib.git",
          "tag": "0.3.0"
        }
      ],
      "buildsystem": "simple",
      "ensure-writable": [
        "/lib/python*/site-packages/easy-install.pth",
        "/app/lib/python*/site-packages/easy-install.pth"
      ],
      "build-commands": [
        "/app/bin/python3.9 setup.py build",
        "/app/bin/python3.9 setup.py install --prefix=${FLATPAK_DEST}"
      ]
    },
    {
      "name": "python3-gnutls",
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/syco/python3-gnutls.git",
          "tag": "release-3.1.10"
        }
      ],
      "buildsystem": "simple",
      "ensure-writable": [
        "/lib/python*/site-packages/easy-install.pth",
        "/app/lib/python*/site-packages/easy-install.pth"
      ],
      "build-commands": [
        "/app/bin/python3.9 setup.py build",
        "/app/bin/python3.9 setup.py install --prefix=${FLATPAK_DEST}"
      ]
    },
    {
      "name": "python3-otr",
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/syco/python3-otr.git",
          "commit": "296b95e959b371f5767e2a965beb501dcbe74269"
        }
      ],
      "buildsystem": "simple",
      "ensure-writable": [
        "/lib/python*/site-packages/easy-install.pth",
        "/app/lib/python*/site-packages/easy-install.pth"
      ],
      "build-commands": [
        "/app/bin/python3.9 setup.py build",
        "/app/bin/python3.9 setup.py install --prefix=${FLATPAK_DEST}"
      ]
    },
    {
      "name": "python3-msrplib",
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/syco/python3-msrplib.git",
          "tag": "0.21.0"
        }
      ],
      "buildsystem": "simple",
      "ensure-writable": [
        "/lib/python*/site-packages/easy-install.pth",
        "/app/lib/python*/site-packages/easy-install.pth"
      ],
      "build-commands": [
        "/app/bin/python3.9 setup.py build",
        "/app/bin/python3.9 setup.py install --prefix=${FLATPAK_DEST}"
      ]
    },
    {
      "name": "python3-xcaplib",
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/syco/python3-xcaplib.git",
          "tag": "2.0.1"
        }
      ],
      "buildsystem": "simple",
      "ensure-writable": [
        "/lib/python*/site-packages/easy-install.pth",
        "/app/lib/python*/site-packages/easy-install.pth"
      ],
      "build-commands": [
        "/app/bin/python3.9 setup.py build",
        "/app/bin/python3.9 setup.py install --prefix=${FLATPAK_DEST}"
      ]
    },
    {
      "name": "python3-sipsimple",
      "modules": [
        "modules/io.mpv.Mpv.json"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/syco/python3-sipsimple.git",
          "commit": "f57ecabb8a8c121bcf5db4f719188659d6f6e7c3"
        },
        {
          "type": "file",
          "url": "https://github.com/pjsip/pjproject/archive/refs/tags/2.10.tar.gz",
          "sha256": "936a4c5b98601b52325463a397ddf11ab4106c6a7b04f8dc7cdd377efbb597de",
          "dest": "deps",
          "dest-filename": "2.10.tar.gz"
        },
        {
          "type": "git",
          "url": "https://github.com/syco/ZRTPCPP.git",
          "commit": "6b3cd8e6783642292bad0c21e3e5e5ce45ff3e03",
          "dest": "deps/ZRTPCPP"
        }
      ],
      "buildsystem": "simple",
      "ensure-writable": [
        "/lib/python*/site-packages/easy-install.pth",
        "/app/lib/python*/site-packages/easy-install.pth"
      ],
      "build-commands": [
        "./get_dependencies.sh",
        "/app/bin/python3.9 setup.py build_ext",
        "/app/bin/python3.9 setup.py install --prefix=${FLATPAK_DEST}"
      ]
    },
    {
      "name": "LibVNC",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/LibVNC/libvncserver/archive/LibVNCServer-0.9.14.tar.gz",
          "sha256": "83104e4f7e28b02f8bf6b010d69b626fae591f887e949816305daebae527c9a5"
        }
      ],
      "buildsystem": "cmake"
    },
    {
      "name": "x11vnc",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/LibVNC/x11vnc/archive/refs/tags/0.9.16.tar.gz",
          "sha256": "885e5b5f5f25eec6f9e4a1e8be3d0ac71a686331ee1cfb442dba391111bd32bd"
        },
        {
          "type": "patch",
          "path": "patches/x11vnc-xfc-null-ptr.patch"
        },
        {
          "type": "patch",
          "path": "patches/x11vnc-gcc10-fix.patch"
        },
        {
          "type": "patch",
          "path": "patches/x11vnc-scan-limit-access-to-shared-memory.patch"
        }
      ]
    },
    {
      "name": "blink",
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/syco/blink-qt.git",
          "tag": "5.5.0"
        },
        {
          "type": "script",
          "dest-filename": "start.sh",
          "commands": [
            "/app/bin/python3.9 /app/bin/blink $@"
          ]
        },
        {
          "type": "patch",
          "path": "patches/blink-qt.patch"
        },
        {
          "type": "file",
          "path": "com.icanblink.blink.desktop"
        },
        {
          "type": "file",
          "path": "com.icanblink.blink.png"
        },
        {
          "type": "file",
          "path": "com.icanblink.blink.metainfo.xml"
        }
      ],
      "buildsystem": "simple",
      "ensure-writable": [
        "/lib/python*/site-packages/easy-install.pth",
        "/app/lib/python*/site-packages/easy-install.pth"
      ],
      "build-commands": [
        "/app/bin/python3.9 setup.py build_ext",
        "/app/bin/python3.9 setup.py install --prefix=${FLATPAK_DEST}",
        "mv start.sh /app/start.sh",
        "chmod +x /app/start.sh"
      ],
      "post-install": [
        "install -Dm644 com.icanblink.blink.desktop ${FLATPAK_DEST}/share/applications/com.icanblink.blink.desktop",
        "install -Dm644 com.icanblink.blink.png ${FLATPAK_DEST}/share/icons/com.icanblink.blink.png",
        "install -Dm644 com.icanblink.blink.metainfo.xml ${FLATPAK_DEST}/share/metainfo/com.icanblink.blink.metainfo.xml"
      ]
    }
  ]
}
